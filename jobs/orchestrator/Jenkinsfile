node {
    stage('Release scan orchestrator') {
        def projects = [:]
        def snyk_org = "16df2e12-d4cb-400d-aaf2-547db9ff07e9"

        projects['client'] = {
            build job: 'test2', parameters: [
                string(name: 'snyk_org', value: snyk_org),
                string(name: 'git_repo', value: "github.com/SymphonyOSF/SFE-Client-App.git"),
                string(name: 'git_hash', value: "20.12"),
                string(name: 'prj_type', value: 'nodejs'),
                string(name: 'snyk_scan', value: 'test')
            ],
            wait: true
        }

        projects['login'] = {
            build job: 'test2', parameters: [
                string(name: 'snyk_org', value: snyk_org),
                string(name: 'git_repo', value: "github.com/SymphonyOSF/SFE-Login.git"),
                string(name: 'git_hash', value: "20.12"),
                string(name: 'prj_type', value: 'nodejs'),
                string(name: 'snyk_scan', value: 'test')
            ],
            wait: true
        }

        projects['sbe'] = {
            build job: 'test2', parameters: [
                string(name: 'snyk_org', value: snyk_org),
                string(name: 'git_repo', value: "github.com/SymphonyOSF/SBE.git"),
                string(name: 'git_hash', value: "20.12"),
                string(name: 'prj_type', value: "java"),
                string(name: 'java_version', value: '8'),
                string(name: 'java_params', value: "-DsymphonySkipUnitTests=true -DsymphonySkipIntegrationTests=true -PSymphony,SharedResources")
            ],
            wait: true
        }

        projects['agent'] = {
            build job: 'test2', parameters: [
                string(name: 'snyk_org', value: snyk_org),
                string(name: 'git_repo', value: "github.com/SymphonyOSF/symphony-agent.git"),
                string(name: 'git_hash', value: "20.12"),
                string(name: 'prj_type', value: "java"),
                string(name: 'java_version', value: '8')
            ],
            wait: true
        }

        parallel projects
    }
}